function doValidate(){let a=!0;return $("#modalAddMitra .form-control").removeClass("is-invalid"),$("#modalAddMitra .text-danger").html(""),""==$("input#mitra_name").val()?($("input#mitra_name").addClass("is-invalid"),a=!1):$("input#mitra_name").val().length>255?($("input#mitra_name").addClass("is-invalid"),$("#mitra_name-error").html("*maximal 255 huruf"),a=!1):/[^A-Za-z0-9\| ]/g.test($("input#mitra_name").val())&&($("input#mitra_name").addClass("is-invalid"),$("#mitra_name-error").html("*hanya boleh huruf dan angka"),a=!1),arrayMitra.forEach(t=>{t.name.toLowerCase()==$("input#mitra_name").val().toLowerCase().trim()&&($("input#mitra_name").addClass("is-invalid"),$("#mitra_name-error").html("*mitra sudah tersedia"),a=!1)}),""==$("#description").val()&&($("#description").addClass("is-invalid"),a=!1),a}const openModalAddMitra=()=>{$("#modalAddMitra .form-control").removeClass("is-invalid"),$("#modalAddMitra .text-danger").html(""),resetModal()},resetModal=()=>{$("#modalAddMitra .form-control").val(""),$("#modalAddMitra #img-preview").attr("src",`${BASEURL}/assets/images/skeleton-icon.png`)},changeThumbPreview=a=>{let t=a.files[0].type.split("/");if(!/image/.test(t[0]))return showAlert({message:"<strong>File yang anda upload bukan gambar!</strong>",autohide:!0,type:"danger"}),a.value="",!1;if(!["jpg","jpeg","png","webp"].includes(t[1]))return showAlert({message:"<strong>Format gambar yang diperbolehkan -> jpg/jpeg/png/webp!</strong>",autohide:!0,type:"danger"}),a.value="",!1;if(a.files[0].size>2e6)return showAlert({message:"ukuran gambar maksimal 2mb",autohide:!0,type:"danger"}),a.value="",!1;{const t=a.files[0],e=URL.createObjectURL(t);document.querySelector("#img-preview").src=e}},addMitra=async(a,t)=>{t.preventDefault();let e=new FormData(a.parentElement.parentElement);if(doValidate()){let a="";$("#modalAddMitra button #text").addClass("d-none"),$("#modalAddMitra button #spinner").removeClass("d-none"),a=await httpRequestPost(`${APIURL}/mitra/addmitra`,e),$("#modalAddMitra button #text").removeClass("d-none"),$("#modalAddMitra button #spinner").addClass("d-none"),201===a.status&&(resetModal(),getAllMitra(),showAlert({message:"<strong>Success...</strong> mitra berhasil ditambah!",autohide:!0,type:"success"}))}};let arrayMitra=[];const getAllMitra=async()=>{$("#table-mitra tbody").html(""),$("#list-mitra-notfound").addClass("d-none"),$("#list-mitra-spinner").removeClass("d-none");let a=await httpRequestGet(`${APIURL}/mitra/getmitra`);if($("#list-mitra-spinner").addClass("d-none"),404==a.status&&(arrayMitra=[],$("#list-mitra-notfound").removeClass("d-none"),$("#list-mitra-notfound #text-notfound").html("mitra belum ditambah")),200===a.status){let t="";arrayMitra=a.data.data,a.data.data.forEach((a,e)=>{t+=`<tr class="text-xs">\n                <td class="align-middle text-center" style="max-width:40px;">\n                    <span class="font-weight-bold"> ${++e} </span>\n                </td>\n                <td class="align-middle text-center py-3" style="max-width:100px;">\n                    <img src="${a.icon}" class="img-thumbnail" style="width:100px;height:100px;max-width:100px;max-height:100px;">\n                </td>\n                <td class="align-middle text-center">\n                    ${a.name}\n                </td>\n                <td class="align-middle text-center" style="max-width:150px;white-space: pre-wrap;"><div style="max-height:100px;overflow: auto;">${a.description}</div></td>\n                <td class="align-middle text-center">\n                    <a href='' id="${a.id}" class="badge badge-danger text-xxs pb-1 rounded cursor-pointer" onclick="hapusMitra('${a.id}',event)">hapus</a>\n                </td>\n             </tr>`}),$("#table-mitra tbody").html(t)}};getAllMitra();const hapusMitra=(a,t)=>{t.preventDefault(),Swal.fire({title:"ANDA YAKIN?",text:"data akan terhapus permanen",icon:"warning",showCancelButton:!0,confirmButtonText:"iya"}).then(t=>{t.isConfirmed&&Swal.fire({input:"password",inputAttributes:{autocapitalize:"off"},html:"<h5 class='mb-4'>Password</h5>",showCancelButton:!0,confirmButtonText:"submit",showLoaderOnConfirm:!0,preConfirm:t=>{let e=new FormData;return e.append("hashedpass",PASSADMIN),e.append("password",t),axios.post(`${APIURL}/admin/confirmdelete`,e,{headers:{}}).then(t=>httpRequestDelete(`${APIURL}/mitra/deletemitra?id=${a}`).then(a=>{201==a.status&&getAllMitra()})).catch(a=>{404==a.response.status?Swal.showValidationMessage("password salah"):500==a.response.status&&Swal.showValidationMessage("terjadi kesalahan, coba sekali lagi")})},allowOutsideClick:()=>!Swal.isLoading()})})};