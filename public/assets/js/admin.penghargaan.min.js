function doValidate(){let a=!0;return $("#modalAddPenghargaan .form-control").removeClass("is-invalid"),$("#modalAddPenghargaan .text-danger").html(""),""==$("input#penghargaan_name").val()?($("input#penghargaan_name").addClass("is-invalid"),a=!1):$("input#penghargaan_name").val().length>255?($("input#penghargaan_name").addClass("is-invalid"),$("#penghargaan_name-error").html("*maximal 255 huruf"),a=!1):/[^A-Za-z0-9\| ]/g.test($("input#penghargaan_name").val())&&($("input#penghargaan_name").addClass("is-invalid"),$("#penghargaan_name-error").html("*hanya boleh huruf dan angka"),a=!1),arrayPenghargaan.forEach(e=>{e.name.toLowerCase()==$("input#penghargaan_name").val().toLowerCase().trim()&&($("input#penghargaan_name").addClass("is-invalid"),$("#penghargaan_name-error").html("*penghargaan sudah tersedia"),a=!1)}),""==$("#description").val()&&($("#description").addClass("is-invalid"),a=!1),a}const openModalAddPenghargaan=()=>{$("#modalAddPenghargaan .form-control").removeClass("is-invalid"),$("#modalAddPenghargaan .text-danger").html(""),resetModal()},resetModal=()=>{$("#modalAddPenghargaan .form-control").val(""),$("#modalAddPenghargaan #img-preview").attr("src",`${BASEURL}/assets/images/skeleton-icon.png`)},changeThumbPreview=a=>{let e=a.files[0].type.split("/");if(!/image/.test(e[0]))return showAlert({message:"<strong>File yang anda upload bukan gambar!</strong>",autohide:!0,type:"danger"}),a.value="",!1;if(!["jpg","jpeg","png","webp"].includes(e[1]))return showAlert({message:"<strong>Format gambar yang diperbolehkan -> jpg/jpeg/png/webp!</strong>",autohide:!0,type:"danger"}),a.value="",!1;if(a.files[0].size>2e6)return showAlert({message:"ukuran gambar maksimal 2mb",autohide:!0,type:"danger"}),a.value="",!1;{const e=a.files[0],n=URL.createObjectURL(e);document.querySelector("#img-preview").src=n}},addPenghargaan=async(a,e)=>{e.preventDefault();let n=new FormData(a.parentElement.parentElement);if(doValidate()){let a="";$("#modalAddPenghargaan button #text").addClass("d-none"),$("#modalAddPenghargaan button #spinner").removeClass("d-none"),a=await httpRequestPost(`${APIURL}/penghargaan/addpenghargaan`,n),$("#modalAddPenghargaan button #text").removeClass("d-none"),$("#modalAddPenghargaan button #spinner").addClass("d-none"),201===a.status&&(resetModal(),getAllPenghargaan(),showAlert({message:"<strong>Success...</strong> penghargaan berhasil ditambah!",autohide:!0,type:"success"}))}};let arrayPenghargaan=[];const getAllPenghargaan=async()=>{$("#table-penghargaan tbody").html(""),$("#list-penghargaan-notfound").addClass("d-none"),$("#list-penghargaan-spinner").removeClass("d-none");let a=await httpRequestGet(`${APIURL}/penghargaan/getpenghargaan`);if($("#list-penghargaan-spinner").addClass("d-none"),404==a.status&&(arrayPenghargaan=[],$("#list-penghargaan-notfound").removeClass("d-none"),$("#list-penghargaan-notfound #text-notfound").html("penghargaan belum ditambah")),200===a.status){let e="";arrayPenghargaan=a.data.data,a.data.data.forEach((a,n)=>{e+=`<tr class="text-xs">\n                <td class="align-middle text-center" style="max-width:40px;">\n                    <span class="font-weight-bold"> ${++n} </span>\n                </td>\n                <td class="align-middle text-center py-3" style="max-width:100px;">\n                    <img src="${a.icon}" class="img-thumbnail" style="width:100px;height:100px;max-width:100px;max-height:100px;">\n                </td>\n                <td class="align-middle text-center">\n                    ${a.name}\n                </td>\n                <td class="align-middle text-center" style="max-width:150px;white-space: pre-wrap;"><div style="max-height:100px;overflow: auto;">${a.description}</div></td>\n                <td class="align-middle text-center">\n                    <a href='' id="${a.id}" class="badge badge-danger text-xxs pb-1 rounded cursor-pointer" onclick="hapusPenghargaan('${a.id}',event)">hapus</a>\n                </td>\n             </tr>`}),$("#table-penghargaan tbody").html(e)}};getAllPenghargaan();const hapusPenghargaan=(a,e)=>{e.preventDefault(),Swal.fire({title:"ANDA YAKIN?",text:"data akan terhapus permanen",icon:"warning",showCancelButton:!0,confirmButtonText:"iya"}).then(e=>{e.isConfirmed&&Swal.fire({input:"password",inputAttributes:{autocapitalize:"off"},html:"<h5 class='mb-4'>Password</h5>",showCancelButton:!0,confirmButtonText:"submit",showLoaderOnConfirm:!0,preConfirm:e=>{let n=new FormData;return n.append("hashedpass",PASSADMIN),n.append("password",e),axios.post(`${APIURL}/admin/confirmdelete`,n,{headers:{}}).then(e=>httpRequestDelete(`${APIURL}/penghargaan/deletepenghargaan?id=${a}`).then(a=>{201==a.status&&getAllPenghargaan()})).catch(a=>{404==a.response.status?Swal.showValidationMessage("password salah"):500==a.response.status&&Swal.showValidationMessage("terjadi kesalahan, coba sekali lagi")})},allowOutsideClick:()=>!Swal.isLoading()})})};