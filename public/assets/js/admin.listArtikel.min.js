localStorage.removeItem("add-artikel");const getAllKatBerita=async()=>{let t="<option value='' selected>-- semua kategori --</option>",e=await httpRequestGet(`${APIURL}/artikel/getkategori`);200===e.status&&e.data.data.forEach((e,a)=>{t+=`<option id="${e.id}" value="${e.name}">${e.name}</option>`}),$("#formFilterArtikel select[name=kategori]").html(t)};getAllKatBerita();const filterArtikel=async t=>{let e=new FormData(t.parentElement.parentElement.parentElement),a=`${e.get("orderby")} - `;artikelUrl=`${APIURL}/artikel/getartikel?orderby=${e.get("orderby")}`,e.get("kategori")&&(a+=`${e.get("kategori")}`,artikelUrl+=`&kategori=${e.get("kategori")}`),""==e.get("kategori")&&(a=`${e.get("orderby")} - semua kategori`,artikelUrl=`${APIURL}/artikel/getartikel?orderby=${e.get("orderby")}`),$("#ket-filter").html(a),getAllBerita()},resetFilterArtikel=async t=>{$("#formFilterArtikel select[name=orderby]").val("terbaru"),$("#formFilterArtikel select[name=kategori]").val("")};let arrayBerita=[],artikelUrl=`${APIURL}/artikel/getartikel?orderby=terbaru`;const getAllBerita=async()=>{$("#search-artikel").val(""),$("#ket-total").html("0"),$("#container-list-artikel").html(""),$("#list-artikel-notfound").addClass("d-none"),$("#list-artikel-spinner").removeClass("d-none");let t=await httpRequestGet(artikelUrl);if($("#list-artikel-spinner").addClass("d-none"),404===t.status)arrayBerita=[],$("#list-artikel-notfound").removeClass("d-none"),$("#list-artikel-notfound #text-notfound").html("artikel belum ditambah");else if(200===t.status){let e="",a=t.data.data;arrayBerita=a,a.forEach(t=>{let a=new Date(1e3*parseInt(t.published_at)),i=(new Date).getTime()>=a.getTime();e+=`<div class="col-12 col-sm-6 col-lg-4 mb-4" style="min-height: 100%;">\n            <div class="card" style="border: 0.5px solid #D2D6DA;min-height: 100%;">\n                <div class="position-relative">\n                    <img class="card-img-top border-radius-0 position-absolute" style="z-index: 10;min-width: 100%;max-width: 100%;max-height: 100%;;min-height: 100%;" src="${t.thumbnail}" style="opacity: 0;">\n                    <img class="card-img-top border-radius-0" src="${BASEURL}/assets/images/default-thumbnail.jpg" style="opacity: 0;">\n                </div>\n                <div class="card-body pb-0 d-flex flex-column justify-content-between" style="font-family: 'qc-semibold';">\n                    <div class="row">\n                        <h4 class="card-title text-capitalize" style="display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;overflow: hidden;text-overflow: ellipsis;">${t.title}</h4>\n                        <h6 class="card-subtitle mb-2 text-muted text-sm">\n                            <i class="fas fa-list-ul mr-1 text-muted text-xs"></i>\n                            ${t.kategori}\n                        </h6>\n                        <div class="px-2">\n                            <div style="width:max-content;" class="badge ${i?"badge-success":"badge-secondary"}">\n                                ${i?"sudah terpublikasi":"belum terpublikasi"}\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row mt-5">\n                        <div class="col-6">\n                            <a href="${BASEURL}/admin/editartikel/${t.id}" class="w-100 btn btn-warning p-2 border-radius-sm" style="height: 34px;">\n                                <i class="far fa-edit"></i>\n                            </a>\n                        </div>\n                        <div class="col-6">\n                            <span class="w-100 btn btn-danger p-2 border-radius-sm" style="height: 34px;" onclick="hapusArtikel('${t.id}');">\n                                <i class="fas fa-trash text-white"></i>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}),$("#ket-total").html(a.length),$("#container-list-artikel").html(e)}};getAllBerita(),$("#search-artikel").on("keyup",function(){let t="",e=[];e=""===$(this).val()?arrayBerita:arrayBerita.filter(t=>t.title.includes($(this).val().toLowerCase())||t.kategori.includes($(this).val().toLowerCase())),0==e.length?($("#list-artikel-notfound").removeClass("d-none"),$("#list-artikel-notfound #text-notfound").html("artikel tidak ditemukan")):($("#list-artikel-notfound").addClass("d-none"),$("#list-artikel-notfound #text-notfound").html(" "),e.forEach(e=>{let a=new Date(1e3*parseInt(e.created_at)),i=a.toLocaleString("en-US",{day:"numeric"}),l=a.toLocaleString("en-US",{month:"long"}),s=a.toLocaleString("en-US",{year:"numeric"});t+=`<div class="col-12 col-sm-6 col-lg-4" style="min-height: 100%;">\n            <div class="card mb-3" style="border: 0.5px solid #D2D6DA;min-height: 100%;">\n                <div class="position-relative">\n                    <img class="card-img-top border-radius-0 position-absolute" style="z-index: 10;min-width: 100%;max-width: 100%;max-height: 100%;;min-height: 100%;" src="${e.thumbnail}" style="opacity: 0;">\n                    <img class="card-img-top border-radius-0" src="${BASEURL}/assets/images/default-thumbnail.jpg" style="opacity: 0;">\n                </div>\n                <div class="card-body pb-0 d-flex flex-column justify-content-between" style="font-family: 'qc-semibold';">\n                    <div class="row">\n                        <h4 class="card-title text-capitalize" style="display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;overflow: hidden;text-overflow: ellipsis;">${e.title}</h4>\n                        <h6 class="card-subtitle mb-2 text-muted text-sm">\n                            <i class="fas fa-list-ul mr-1 text-muted text-xs"></i>\n                            ${e.kategori}\n                        </h6>\n                        <h6 class="card-subtitle mb-2 text-muted text-sm">\n                            <i class="far fa-clock mr-1 text-muted text-xs"></i>\n                            ${l}, ${i}, ${s}\n                        </h6>\n                        <h6 class="card-subtitle text-muted text-sm" style="display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;overflow: hidden;text-overflow: ellipsis;">\n                            <i class="fas fa-user-edit mr-1 text-muted text-xs"></i>\n                            ${e.penulis}\n                        </h6>\n                    </div>\n                    <div class="row">\n                        <div class="col-6">\n                            <a href="${BASEURL}/admin/editartikel/${e.id}" class="w-100 btn btn-warning p-2 border-radius-sm" style="height: 34px;">\n                                <i class="far fa-edit"></i>\n                            </a>\n                        </div>\n                        <div class="col-6">\n                            <span class="w-100 btn btn-danger p-2 border-radius-sm" style="height: 34px;" onclick="hapusArtikel('${e.id}');">\n                                <i class="fas fa-trash text-white"></i>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`})),$("#ket-total").html(e.length),$("#container-list-artikel").html(t)});const hapusArtikel=t=>{Swal.fire({input:"password",inputAttributes:{autocapitalize:"off"},html:"<h5 class='mb-4'>Password</h5>",showCancelButton:!0,confirmButtonText:"submit",showLoaderOnConfirm:!0,preConfirm:e=>{let a=new FormData;return a.append("hashedpass",PASSADMIN),a.append("password",e),axios.post(`${APIURL}/admin/confirmdelete`,a,{headers:{}}).then(e=>httpRequestDelete(`${APIURL}/artikel/deleteartikel?id=${t}`).then(t=>{201==t.status&&getAllBerita()})).catch(t=>{404==t.response.status?Swal.showValidationMessage("password salah"):500==t.response.status&&Swal.showValidationMessage("terjadi kesalahan, coba sekali lagi")})},allowOutsideClick:()=>!Swal.isLoading()})};